# Story 1.1: Project Scaffolding & Initial Setup

## Status
Ready for Review

## Story
**As a** Developer,
**I want** the monorepo and initial frontend/backend application shells to be set up,
**so that** I have a clean, consistent structure to begin building features.

## Acceptance Criteria
1. A monorepo is created with package management configured.
2. A basic Next.js frontend application is scaffolded within the monorepo.
3. A basic Node.js backend service is scaffolded within the monorepo.
4. Root-level configuration for TypeScript, ESLint, and Prettier is in place to enforce code quality.
5. Both frontend and backend applications can be started and run concurrently.

## Tasks / Subtasks
- [x] Task 1: Set up monorepo structure and package management (AC: 1)
  - [x] Initialize root package.json with pnpm workspace configuration
  - [x] Create apps/ and packages/ directories according to project structure
  - [x] Configure pnpm workspace settings
- [x] Task 2: Scaffold Next.js frontend application (AC: 2)
  - [x] Create apps/web/ directory
  - [x] Initialize Next.js 15.x.x application with TypeScript
  - [x] Configure Next.js for App Router architecture
  - [x] Set up Tailwind CSS and Shadcn/ui integration
- [x] Task 3: Scaffold NestJS backend service (AC: 3)
  - [x] Create apps/api/ directory
  - [x] Initialize NestJS 10.x.x application with TypeScript
  - [x] Configure basic module structure
  - [x] Set up Pino logging framework
- [x] Task 4: Configure shared packages (AC: 1, 4)
  - [x] Create packages/shared-types/ for TypeScript interfaces
  - [x] Create packages/eslint-config-custom/ for shared ESLint configuration
  - [x] Create packages/ui/ for shared UI components
- [x] Task 5: Set up root-level tooling configuration (AC: 4)
  - [x] Configure TypeScript 5.5.x with shared tsconfig
  - [x] Set up ESLint with custom configuration
  - [x] Configure Prettier for code formatting
  - [x] Add pre-commit hooks for code quality
- [x] Task 6: Configure development scripts and testing (AC: 5)
  - [x] Set up concurrent development scripts using pnpm
  - [x] Configure Vitest for both frontend and backend testing
  - [x] Create basic health check endpoints and tests
  - [x] Verify both applications start and run concurrently

## Dev Notes

### Previous Story Insights
This is the first story in the project, so no previous story insights are available.

### Tech Stack Requirements
[Source: architecture/tech-stack.md]
- **Frontend**: Next.js 15.x.x with TypeScript 5.5.x
- **Backend**: NestJS 10.x.x with TypeScript 5.5.x
- **UI Components**: Shadcn/ui & Tailwind CSS (latest)
- **State Management**: Zustand 4.5.x (for future implementation)
- **Package Manager**: pnpm (implied from development workflow)
- **Testing**: Vitest (latest) for both frontend and backend
- **Logging**: Pino 9.x.x for backend services

### Project Structure Requirements
[Source: architecture/unified-project-structure.md]
```
syntaskio/
├── .github/
│   └── workflows/
├── apps/
│   ├── web/                    # Next.js Frontend App
│   └── api/                    # NestJS Backend
├── packages/
│   ├── ui/
│   ├── shared-types/
│   └── eslint-config-custom/
├── infrastructure/             # Terraform files
```

### Development Workflow Requirements
[Source: architecture/development-workflow.md]
- **Prerequisites**: Node.js, pnpm, Docker
- **Development Commands**: pnpm dev to run all services
- **Environment Configuration**: .env.example file with necessary environment variables

### Frontend Architecture Requirements
[Source: architecture/frontend-architecture.md]
- **Component Organization**: Feature-based organization with shared and UI-specific component directories
- **State Management**: Zustand for global state management, organized by domain
- **Routing**: Next.js App Router for file-based routing
- **API Client**: Centralized API client with base URLs and automatic authentication headers

### Backend Architecture Requirements
[Source: architecture/backend-architecture.md]
- **Service Architecture**: NestJS microservices organized into modules by feature
- **Data Access**: Repository Pattern using Prisma ORM (for future implementation)
- **Authentication**: NestJS Guards for JWT validation (for future implementation)

### Data Models
[Source: architecture/data-models.md]
- Shared TypeScript interfaces for User, Integration, Task, and Enhancement models
- These should be placed in packages/shared-types/ for use across frontend and backend

### Testing Requirements
[Source: architecture/testing-coding-error-handling-and-monitoring-standards.md]
- **Testing Strategy**: Adherence to testing pyramid with Vitest for unit/integration tests
- **Coding Standards**: ESLint enforcement, mandatory use of shared types package
- **Error Handling**: Standardized error format for API responses (for future implementation)

### File Locations
Based on project structure, new code should be created in:
- Frontend: `apps/web/`
- Backend: `apps/api/`
- Shared types: `packages/shared-types/`
- Shared UI: `packages/ui/`
- ESLint config: `packages/eslint-config-custom/`

### Technical Constraints
- TypeScript 5.5.x must be used consistently across all packages
- ESLint configuration must be shared and enforced
- All applications must be startable via pnpm dev command
- Testing framework must be Vitest for consistency

## Testing
[Source: architecture/testing-coding-error-handling-and-monitoring-standards.md]
- **Test Framework**: Vitest for both frontend and backend
- **Test Strategy**: Follow testing pyramid approach
- **Test Location**: Tests should be co-located with source files or in __tests__ directories
- **Testing Requirements**: 
  - Unit tests for core functionality
  - Integration tests for API endpoints (when applicable)
  - Basic health check tests to verify applications start correctly

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-01 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
Claude Sonnet 4 (Augment Agent)

### Debug Log References
- Fixed PostCSS configuration issue with Tailwind CSS v4 (development vs build compatibility)
- Configured Vitest with SWC for NestJS decorator support
- Resolved pnpm workspace configuration for monorepo structure
- Updated Husky configuration for modern version compatibility

### Completion Notes List
- Successfully created complete monorepo structure with pnpm workspaces
- Next.js 15.x.x frontend application with Tailwind CSS and Shadcn/ui integration
- NestJS 10.x.x backend service with Pino logging and health check endpoint
- Shared packages for TypeScript types, ESLint config, and UI components
- Root-level tooling with TypeScript, ESLint, Prettier, and Husky pre-commit hooks
- Vitest testing framework configured for both frontend and backend
- All applications verified to start and run concurrently via `pnpm dev`
- All tests passing for both frontend and backend applications

### File List
**Root Configuration:**
- package.json (monorepo configuration with pnpm workspaces)
- pnpm-workspace.yaml (workspace configuration)
- tsconfig.json (shared TypeScript configuration)
- .eslintrc.js (root ESLint configuration)
- .prettierrc (Prettier configuration)
- .prettierignore (Prettier ignore patterns)
- .husky/pre-commit (pre-commit hook for lint-staged)

**Frontend Application (apps/web/):**
- package.json (Next.js application configuration)
- next.config.ts (Next.js configuration)
- tailwind.config.ts (Tailwind CSS configuration)
- postcss.config.mjs (PostCSS configuration)
- components.json (Shadcn/ui configuration)
- vitest.config.ts (Vitest configuration)
- src/app/page.tsx (main page component)
- src/app/page.test.tsx (page component test)
- src/app/layout.tsx (root layout)
- src/app/globals.css (global styles)
- src/lib/utils.ts (utility functions)
- src/test/setup.ts (test setup file)

**Backend Application (apps/api/):**
- package.json (NestJS application configuration)
- nest-cli.json (NestJS CLI configuration)
- tsconfig.json (TypeScript configuration)
- tsconfig.build.json (Build TypeScript configuration)
- vitest.config.ts (Vitest configuration with SWC)
- src/main.ts (application entry point with Pino logging)
- src/app.module.ts (root module with Pino configuration)
- src/app.controller.ts (main controller with health endpoint)
- src/app.service.ts (main service with health check)
- src/app.controller.spec.ts (controller tests)

**Shared Packages:**
- packages/shared-types/package.json
- packages/shared-types/tsconfig.json
- packages/shared-types/src/index.ts (shared TypeScript interfaces)
- packages/eslint-config-custom/package.json
- packages/eslint-config-custom/index.js (shared ESLint configuration)
- packages/ui/package.json
- packages/ui/tsconfig.json
- packages/ui/src/index.ts (UI component exports)
- packages/ui/src/components/Button.tsx (shared Button component)

## QA Results
*Results from QA Agent review will be populated here after implementation*
